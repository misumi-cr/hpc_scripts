#!/bin/bash

cname=g.e213.T62_g17.0024
st_arc_dir=/lustre/wrk/misumi/cesm2/archive

target_dir=$st_arc_dir"/"$cname"/ocn/hist"

h_list=$(find "$target_dir" -name "$cname.*.h.????-??.nc" | sort -n -t. -k4,4 -k5,5)

h_list_filtered=$(echo "$h_list" | head -n -$(echo "$h_list" | grep -o '\.h\.[0-9]\{4\}' | tail -n $n | wc -l))

echo "$h_list_filtered"